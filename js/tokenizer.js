!function(t,e){"function"==typeof define&&define.amd?define(["exports"],e):"undefined"!=typeof exports?e(exports):e(t)}(this,function(t){function e(t){return B(t,48,57)}function n(t){return e(t)||B(t,65,70)||B(t,97,102)}function r(t){return B(t,65,90)}function o(t){return B(t,97,122)}function i(t){return r(t)||o(t)}function a(t){return t>=160}function p(t){return i(t)||a(t)||95==t}function u(t){return p(t)||e(t)||45==t}function s(t){return B(t,0,8)||B(t,14,31)||B(t,127,159)}function d(t){return 10==t||12==t}function c(t){return d(t)||9==t||32==t}function f(t){return d(t)||isNaN(t)}function h(t,r){void 0==r&&(r={transformFunctionWhitespace:!1,scientificNotation:!1});for(var o,i,a=-1,h=[],y="data",l=0,D=0,B=0,K=function(){l+=1,B=D,D=0},j={line:l,column:D},z=function(e){return void 0===e&&(e=1),t.charCodeAt(a+e)},Y=function(e){return void 0===e&&(e=1),a+=e,o=t.charCodeAt(a),d(o)?K():D+=e,!0},Q=function(){return a-=1,d(o)?(l-=1,D=B):D-=1,j.line=l,j.column=D,!0},V=function(){return a>=t.length},X=function(){},Z=function(t){return t?t.finish():t=i.finish(),r.loc===!0&&(t.loc={},t.loc.start={line:j.line,column:j.column},j={line:l,column:D},t.loc.end=j),h.push(t),i=void 0,!0},$=function(t){return i=t,!0},_=function(){return console.log("Parse error at index "+a+", processing codepoint 0x"+o.toString(16)+" in state "+y+"."),!0},te=function(t){return console.log("MAJOR SPEC ERROR: "+t),!0},ee=function(t){return y=t,!0},ne=function(){if(Y(),n(o)){for(var t=[],e=0;6>e&&n(o);e++)t.push(o),Y();var r=parseInt(t.map(String.fromCharCode).join(""),16);return r>J&&(r=65533),c(o)||Q(),r}return o};;){if(a>2*t.length)return"I'm infinite-looping!";switch(Y(),y){case"data":if(c(o))for(Z(new S);c(z());)Y();else if(34==o)ee("double-quote-string");else if(35==o)ee("hash");else if(39==o)ee("single-quote-string");else if(40==o)Z(new A);else if(41==o)Z(new I);else if(43==o)e(z())||46==z()&&e(z(2))?ee("number")&&Q():Z(new U(o));else if(45==o)45==z(1)&&62==z(2)?Y(2)&&Z(new k):e(z())||46==z(1)&&e(z(2))?ee("number")&&Q():ee("ident")&&Q();else if(46==o)e(z())?ee("number")&&Q():Z(new U(o));else if(47==o)42==z()?Y()&&ee("comment"):Z(new U(o));else if(58==o)Z(new m);else if(59==o)Z(new b);else if(60==o)33==z(1)&&45==z(2)&&45==z(3)?Y(3)&&Z(new v):Z(new U(o));else if(64==o)ee("at-keyword");else if(91==o)Z(new E);else if(92==o)f(z())?_()&&Z(new U(o)):ee("ident")&&Q();else if(93==o)Z(new N);else if(123==o)Z(new C);else if(125==o)Z(new T);else if(e(o))ee("number")&&Q();else if(85==o||117==o)43==z(1)&&n(z(2))?Y()&&ee("unicode-range"):ee("ident")&&Q();else if(p(o))ee("ident")&&Q();else{if(V())return Z(new R),h;Z(new U(o))}break;case"double-quote-string":void 0==i&&$(new L),34==o?Z()&&ee("data"):V()?_()&&Z()&&ee("data")&&Q():d(o)?_()&&Z(new w)&&ee("data")&&Q():92==o?f(z())?_()&&Z(new w)&&ee("data"):d(z())?Y():i.append(ne()):i.append(o);break;case"single-quote-string":void 0==i&&$(new L),39==o?Z()&&ee("data"):V()?_()&&Z()&&ee("data"):d(o)?_()&&Z(new w)&&ee("data")&&Q():92==o?f(z())?_()&&Z(new w)&&ee("data"):d(z())?Y():i.append(ne()):i.append(o);break;case"hash":u(o)?$(new M(o))&&ee("hash-rest"):92==o?f(z())?_()&&Z(new U(35))&&ee("data")&&Q():$(new M(ne()))&&ee("hash-rest"):Z(new U(35))&&ee("data")&&Q();break;case"hash-rest":u(o)?i.append(o):92==o?f(z())?_()&&Z()&&ee("data")&&Q():i.append(ne()):Z()&&ee("data")&&Q();break;case"comment":42==o?47==z()?Y()&&ee("data"):X():V()?_()&&ee("data")&&Q():X();break;case"at-keyword":45==o?p(z())?$(new q(45))&&ee("at-keyword-rest"):92!=z(1)||f(z(2))?_()&&Z(new U(64))&&ee("data")&&Q():$(new AtKeywordtoken(45))&&ee("at-keyword-rest"):p(o)?$(new q(o))&&ee("at-keyword-rest"):92==o?f(z())?_()&&Z(new U(35))&&ee("data")&&Q():$(new q(ne()))&&ee("at-keyword-rest"):Z(new U(64))&&ee("data")&&Q();break;case"at-keyword-rest":u(o)?i.append(o):92==o?f(z())?_()&&Z()&&ee("data")&&Q():i.append(ne()):Z()&&ee("data")&&Q();break;case"ident":45==o?p(z())?$(new O(o))&&ee("ident-rest"):92!=z(1)||f(z(2))?Z(new U(45))&&ee("data"):$(new O(o))&&ee("ident-rest"):p(o)?$(new O(o))&&ee("ident-rest"):92==o?f(z())?_()&&ee("data")&&Q():$(new O(ne()))&&ee("ident-rest"):te("Hit the generic 'else' clause in ident state.")&&ee("data")&&Q();break;case"ident-rest":u(o)?i.append(o):92==o?f(z())?_()&&Z()&&ee("data")&&Q():i.append(ne()):40==o?i.ASCIImatch("url")?ee("url"):Z(new G(i))&&ee("data"):c(o)&&r.transformFunctionWhitespace?ee("transform-function-whitespace")&&Q():Z()&&ee("data")&&Q();break;case"transform-function-whitespace":c(z())?X():40==o?Z(new G(i))&&ee("data"):Z()&&ee("data")&&Q();break;case"number":$(new x),45==o?e(z())?Y()&&i.append([45,o])&&ee("number-rest"):46==z(1)&&e(z(2))?Y(2)&&i.append([45,46,o])&&ee("number-fraction"):ee("data")&&Q():43==o?e(z())?Y()&&i.append([43,o])&&ee("number-rest"):46==z(1)&&e(z(2))?Y(2)&&i.append([43,46,o])&&ee("number-fraction"):ee("data")&&Q():e(o)?i.append(o)&&ee("number-rest"):46==o?e(z())?Y()&&i.append([46,o])&&ee("number-fraction"):ee("data")&&Q():ee("data")&&Q();break;case"number-rest":e(o)?i.append(o):46==o?e(z())?Y()&&i.append([46,o])&&ee("number-fraction"):Z()&&ee("data")&&Q():37==o?Z(new F(i))&&ee("data"):69==o||101==o?e(z())?Y()&&i.append([37,o])&&ee("sci-notation"):43!=z(1)&&45!=z(1)||!e(z(2))?$(new P(i,o))&&ee("dimension"):i.append([37,z(1),z(2)])&&Y(2)&&ee("sci-notation"):45==o?p(z())?Y()&&$(new P(i,[45,o]))&&ee("dimension"):92==z(1)&&f(z(2))?_()&&Z()&&ee("data")&&Q():92==z(1)?Y()&&$(new P(i,[45,ne()]))&&ee("dimension"):Z()&&ee("data")&&Q():p(o)?$(new P(i,o))&&ee("dimension"):92==o?f(z)?_()&&Z()&&ee("data")&&Q():$(new P(i,ne))&&ee("dimension"):Z()&&ee("data")&&Q();break;case"number-fraction":i.type="number",e(o)?i.append(o):37==o?Z(new F(i))&&ee("data"):69==o||101==o?e(z())?Y()&&i.append([101,o])&&ee("sci-notation"):43!=z(1)&&45!=z(1)||!e(z(2))?$(new P(i,o))&&ee("dimension"):i.append([101,z(1),z(2)])&&Y(2)&&ee("sci-notation"):45==o?p(z())?Y()&&$(new P(i,[45,o]))&&ee("dimension"):92==z(1)&&f(z(2))?_()&&Z()&&ee("data")&&Q():92==z(1)?Y()&&$(new P(i,[45,ne()]))&&ee("dimension"):Z()&&ee("data")&&Q():p(o)?$(new P(i,o))&&ee("dimension"):92==o?f(z)?_()&&Z()&&ee("data")&&Q():$(new P(i,ne()))&&ee("dimension"):Z()&&ee("data")&&Q();break;case"dimension":u(o)?i.append(o):92==o?f(z())?_()&&Z()&&ee("data")&&Q():i.append(ne()):Z()&&ee("data")&&Q();break;case"sci-notation":i.type="number",e(o)?i.append(o):Z()&&ee("data")&&Q();break;case"url":V()?_()&&Z(new g)&&ee("data"):34==o?ee("url-double-quote"):39==o?ee("url-single-quote"):41==o?Z(new H)&&ee("data"):c(o)?X():ee("url-unquoted")&&Q();break;case"url-double-quote":i instanceof H||$(new H),V()?_()&&Z(new g)&&ee("data"):34==o?ee("url-end"):d(o)?_()&&ee("bad-url"):92==o?d(z())?Y():f(z())?_()&&Z(new g)&&ee("data")&&Q():i.append(ne()):i.append(o);break;case"url-single-quote":i instanceof H||$(new H),V()?_()&&Z(new g)&&ee("data"):39==o?ee("url-end"):d(o)?_()&&ee("bad-url"):92==o?d(z())?Y():f(z())?_()&&Z(new g)&&ee("data")&&Q():i.append(ne()):i.append(o);break;case"url-end":V()?_()&&Z(new g)&&ee("data"):c(o)?X():41==o?Z()&&ee("data"):_()&&ee("bad-url")&&Q();break;case"url-unquoted":i instanceof H||$(new H),V()?_()&&Z(new g)&&ee("data"):c(o)?ee("url-end"):41==o?Z()&&ee("data"):34==o||39==o||40==o||s(o)?_()&&ee("bad-url"):92==o?f(z())?_()&&ee("bad-url"):i.append(ne()):i.append(o);break;case"bad-url":V()?_()&&Z(new g)&&ee("data"):41==o?Z(new g)&&ee("data"):92==o?f(z())?X():ne():X();break;case"unicode-range":for(var re=[o],oe=[o],ie=1;6>ie&&n(z());ie++)Y(),re.push(o),oe.push(o);if(63==z()){for(;6>ie&&63==z();ie++)Y(),re.push("0".charCodeAt(0)),oe.push("f".charCodeAt(0));Z(new W(re,oe))&&ee("data")}else if(45==z(1)&&n(z(2))){Y(),Y(),oe=[o];for(var ie=1;6>ie&&n(z());ie++)Y(),oe.push(o);Z(new W(re,oe))&&ee("data")}else Z(new W(re))&&ee("data");break;default:te("Unknown state '"+y+"'")}}}function y(t){return String.fromCharCode.apply(null,t.filter(function(t){return t}))}function l(){return this}function w(){return this}function g(){return this}function S(){return this}function v(){return this}function k(){return this}function m(){return this}function b(){return this}function C(){return this}function T(){return this}function E(){return this}function N(){return this}function A(){return this}function I(){return this}function R(){return this}function U(t){return this.value=String.fromCharCode(t),this}function D(){return this}function O(t){this.value=[],this.append(t)}function G(t){this.value=t.finish().value}function q(t){this.value=[],this.append(t)}function M(t){this.value=[],this.append(t)}function L(t){this.value=[],this.append(t)}function H(t){this.value=[],this.append(t)}function x(t){this.value=[],this.append(t),this.type="integer"}function F(t){t.finish(),this.value=t.value,this.repr=t.repr}function P(t,e){t.finish(),this.num=t.value,this.unit=[],this.repr=t.repr,this.append(e)}function W(t,e){return t=parseInt(y(t),16),e=void 0===e?t+1:parseInt(y(e),16),t>J&&(e=t),t>e&&(e=t),e>J&&(e=J),this.start=t,this.end=e,this}var B=function(t,e,n){return t>=e&&n>=t},J=1114111;l.prototype.finish=function(){return this},l.prototype.toString=function(){return this.tokenType},l.prototype.toSourceString=l.prototype.toString,l.prototype.toJSON=function(){return this.toString()},w.prototype=new l,w.prototype.tokenType="BADSTRING",g.prototype=new l,g.prototype.tokenType="BADURL",S.prototype=new l,S.prototype.tokenType="WHITESPACE",S.prototype.toString=function(){return"WS"},S.prototype.toSourceString=function(){return" "},v.prototype=new l,v.prototype.tokenType="CDO",k.prototype=new l,k.prototype.tokenType="CDC",m.prototype=new l,m.prototype.tokenType=":",b.prototype=new l,b.prototype.tokenType=";",C.prototype=new l,C.prototype.tokenType="{",T.prototype=new l,T.prototype.tokenType="}",E.prototype=new l,E.prototype.tokenType="[",N.prototype=new l,N.prototype.tokenType="]",A.prototype=new l,A.prototype.tokenType="(",I.prototype=new l,I.prototype.tokenType=")",R.prototype=new l,R.prototype.tokenType="EOF",U.prototype=new l,U.prototype.tokenType="DELIM",U.prototype.toString=function(){return"DELIM("+this.value+")"},U.prototype.toSourceString=function(){return this.value},D.prototype=new l,D.prototype.append=function(t){if(t instanceof Array)for(var e=0;e<t.length;e++)this.value.push(t[e]);else this.value.push(t);return!0},D.prototype.finish=function(){return this.value=this.valueAsString(),this},D.prototype.ASCIImatch=function(t){return this.valueAsString().toLowerCase()==t.toLowerCase()},D.prototype.valueAsString=function(){return"string"==typeof this.value?this.value:y(this.value)},D.prototype.valueAsCodes=function(){if("string"==typeof this.value){for(var t=[],e=0;e<this.value.length;e++)t.push(this.value.charCodeAt(e));return t}return this.value.filter(function(t){return t})},O.prototype=new D,O.prototype.tokenType="IDENT",O.prototype.toString=function(){return"IDENT("+this.value+")"},O.prototype.toSourceString=function(){return this.value},G.prototype=new D,G.prototype.tokenType="FUNCTION",G.prototype.toString=function(){return"FUNCTION("+this.value+")"},G.prototype.toSourceString=function(){return this.value},q.prototype=new D,q.prototype.tokenType="AT-KEYWORD",q.prototype.toString=function(){return"AT("+this.value+")"},q.prototype.toSourceString=function(){return"@"+this.value},M.prototype=new D,M.prototype.tokenType="HASH",M.prototype.toString=function(){return"HASH("+this.value+")"},M.prototype.toSourceString=function(){return"#"+this.value},L.prototype=new D,L.prototype.tokenType="STRING",L.prototype.toString=function(){return'"'+this.value+'"'},L.prototype.toSourceString=L.prototype.toString,H.prototype=new D,H.prototype.tokenType="URL",H.prototype.toString=function(){return"URL("+this.value+")"},H.prototype.toSourceString=function(){return"url('"+this.value+"')"},x.prototype=new D,x.prototype.tokenType="NUMBER",x.prototype.toString=function(){return"integer"==this.type?"INT("+this.value+")":"NUMBER("+this.value+")"},x.prototype.toSourceString=function(){return"integer"==this.type?this.value:this.value},x.prototype.finish=function(){return this.repr=this.valueAsString(),this.value=1*this.repr,0!=Math.abs(this.value)%1&&(this.type="number"),this},F.prototype=new l,F.prototype.tokenType="PERCENTAGE",F.prototype.toString=function(){return"PERCENTAGE("+this.value+")"},F.prototype.toSourceString=function(){return this.value+"%"},P.prototype=new l,P.prototype.tokenType="DIMENSION",P.prototype.toString=function(){return"DIM("+this.num+","+this.unit+")"},P.prototype.toSourceString=function(){return this.num+this.unit},P.prototype.append=function(t){if(t instanceof Array)for(var e=0;e<t.length;e++)this.unit.push(t[e]);else this.unit.push(t);return!0},P.prototype.finish=function(){return this.unit=y(this.unit),this.repr+=this.unit,this},W.prototype=new l,W.prototype.tokenType="UNICODE-RANGE",W.prototype.toString=function(){return this.start+1==this.end?"UNICODE-RANGE("+this.start.toString(16).toUpperCase()+")":this.start<this.end?"UNICODE-RANGE("+this.start.toString(16).toUpperCase()+"-"+this.end.toString(16).toUpperCase()+")":"UNICODE-RANGE()"},W.prototype.toSourceString=function(){return this.start+1==this.end?"UNICODE-RANGE("+this.start.toString(16).toUpperCase()+")":this.start<this.end?"UNICODE-RANGE("+this.start.toString(16).toUpperCase()+"-"+this.end.toString(16).toUpperCase()+")":"UNICODE-RANGE()"},W.prototype.contains=function(t){return t>=this.start&&t<this.end},t.tokenize=h});